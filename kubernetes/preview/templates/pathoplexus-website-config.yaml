---
apiVersion: v1
kind: ConfigMap
metadata:
  name: pathoplexus-website-config
  namespace: {{ .Values.namespace }}
data:
  website_config.json: |
    {{ .Files.Get "config.yml" | fromYaml | include "pathoplexus.generateWebsiteConfig" | fromYaml | toJson }}

  runtime_config.json: |
    {
      {{- if eq .Values.mode "dev" }}
      "backendUrl": "http://host.k3d.internal:8079/dummy-organism",
      {{- else }}
      "backendUrl": "http://localhost:8079/dummy-organism",
      {{- end }}
      "lapisUrl": "http://pathoplexus-lapis-service-dummy-organism:8080"
    }

{
  "title": "values.yaml Schema for the Loculus Helm Chart",
  "description": "Also has 'groups' and 'placeholder' keys in some places, which are used during docs generation. You can set 'docsIncludePrefix' to false to cut off a path when generating docs. Have a look at the SchemaDocs.astro component in the Loculus docs.",
  "$schema": "http://json-schema.org/draft-07/schema#",
  "definitions": {
    "metadata": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "name": {
          "groups": ["metadata"],
          "type": "string",
          "description": "Key used across app to refer to this field."
        },
        "displayName": {
          "groups": ["metadata"],
          "type": "string",
          "description": "Name displayed to users."
        },
        "type": {
          "groups": ["metadata"],
          "type": "string",
          "enum": ["string", "int", "float", "number", "date", "boolean", "authors"],
          "default": "string"
        },
        "header": {
          "groups": ["metadata"],
          "type": "string",
          "description": "Grouping of fields in sequence details UI."
        },
        "required": {
          "groups": ["metadata"],
          "type": "boolean",
          "description": "Whether the field is required by backend."
        },
        "desired": {
          "groups": ["metadata"],
          "type": "boolean",
          "description": "Whether the field is a desired input field for submitters."
        },
        "definition": {
          "groups": ["metadata"],
          "type": "string",
          "description": "Definition of input field for submitters."
        },
        "guidance": {
          "groups": ["metadata"],
          "type": "string",
          "description": "Guidance for submitters on filling in input field."
        },
        "noInput": {
          "groups": ["metadata"],
          "type": "boolean",
          "description": "Whether a field with this name is expected as possible input, and so should be included in the metadata template and as a form field. (If set to true it will not be included)."
        },
        "notSearchable": {
          "groups": ["metadata"],
          "type": "boolean",
          "description": "If true, disable search for this field."
        },
        "generateIndex": {
          "groups": ["metadata"],
          "type": "boolean",
          "description": "Whether the field should be indexed for search. This is only allowed for string fields and facilitates faster filters. It is recommended if the number of different values is rather small."
        },
        "columnWidth": {
          "groups": ["metadata"],
          "type": "number",
          "description": "The minimum column width for this field on the search table."
        },
        "order": {
          "groups": ["metadata"],
          "type": "number",
          "description": "Order for the column in the search table, lower first."
        },
        "autocomplete": {
          "groups": ["metadata"],
          "type": "boolean",
          "description": "Whether autocomplete should be offered for the field. This is only allowed for string fields and probably `generateIndex` should be true."
        },
        "options": {
          "groups": ["metadata"],
          "type": "array",
          "description": "An array of options for the value of this field, when it is an input field.",
          "placeholder": "option",
          "items": {
            "type": "object",
            "additionalProperties": false,
            "properties": {
              "name": {
                "groups": ["metadata"],
                "type": "string",
                "description": "The name of the option."
              }
            }
          }
        },
        "enableSubstringSearch": {
          "groups": ["metadata"],
          "type": "boolean",
          "description": "If true, search results will contain results that contain the given value as a substring. If false (the default), only exact matches will be returned. This only works for string fields, and you cannot also enable `autocomplete`."
        },
        "rangeSearch": {
          "groups": ["metadata"],
          "type": "boolean",
          "description": "If true, enables range search for numeric fields."
        },
        "rangeOverlapSearch": {
          "groups": ["metadata"],
          "type": "object",
          "additionalProperties": false,
          "description": "Config settings for enabling range overlap search.",
          "properties": {
            "rangeName": {
              "groups": ["metadata"],
              "type": "string",
              "description": "The range that this field belongs to. Two fields (the upper and lower bound) need to be defined with the same range ID."
            },
            "rangeDisplayName": {
              "groups": ["metadata"],
              "type": "string",
              "description": "The display name of the range."
            },
            "bound": {
              "groups": ["metadata"],
              "type": "string",
              "enum": ["lower", "upper"],
              "description": "Whether this field is the lower or upper bound of the range."
            }
          }
        },
        "initiallyVisible": {
          "groups": ["metadata"],
          "type": "boolean",
          "description": "If true, the field is initially visible in the UI."
        },
        "isSequenceFilter": {
          "groups": ["metadata"],
          "type": "boolean",
          "description": "If true, this field will appear under 'Sequence Filters' on the search page instead of 'Metadata Filters'. Defaults to false."
        },
        "relatesToSegment": {
          "groups": ["metadata"],
          "type": "string",
          "description": "Which segment this metadata field relates to. Can be set to any of the segment names defined for the organism."
        },
        "hideOnSequenceDetailsPage": {
          "groups": ["metadata"],
          "type": "boolean",
          "description": "If true, hides the field on the sequence details page."
        },
        "orderOnDetailsPage": {
          "groups": ["metadata"],
          "type": "number",
          "description": "Determines the order on the sequence details page."
        },
        "hideInSearchResultsTable": {
          "groups": ["metadata"],
          "type": "boolean",
          "description": "If true, hides the field in the search results table (and makes it impossible to show)."
        },
        "includeInDownloadsByDefault": {
          "groups": ["metadata"],
          "type": "boolean",
          "description": "Whether this field should be included in metadata downloads by default."
        },
        "perSegment": {
          "groups": ["metadata"],
          "type": "boolean",
          "description": "Whether this is a metadata field that should exist for each segment. If so fields will be created as fieldName_A, fieldName_B in the case of an organism with segments A and B."
        },
        "oneHeader": {
          "groups": ["metadata"],
          "type": "boolean",
          "description": "For segmented fields, whether this field should be grouped by segment or not."
        },
        "customDisplay": {
          "groups": ["metadata"],
          "type": "object",
          "description": "Custom display settings for the field on the sequence details page (see [here](#custom-display))",
          "properties": {
            "type": {
              "groups": ["metadata"],
              "type": "string"
            },
            "url": {
              "groups": ["metadata"],
              "type": "string"
            },
            "label": {
              "groups": ["metadata"],
              "type": "string",
              "description": "Label to display for grouped fields on the sequence details page. Overrides the field's displayName when fields are grouped via displayGroup."
            }
          }
        },
        "onlyForReference": {
          "groups": ["metadata"],
          "type": "string",
          "description": "Optional. Affects the search page of the website: specify which reference the metadata field applies to, this metadata field will then only be visible if that reference is selected (in the search bar, as a table column, and in the metadata download). Must be a valid reference as defined in the reference genomes."
        },
        "ontology_id": {
          "groups": ["metadata"],
          "type": "string"
        },
        "example": {
          "groups": ["metadata"],
          "type": ["string", "number"],
          "description": "Example value for the field."
        },
        "ingest": {
          "groups": ["metadata"],
          "type": "string",
          "description": "Which NCBI field to map to this field."
        },
        "preprocessing": {
          "groups": ["metadata"],
          "type": "object",
          "description": "The values of this field will be added to the preprocessing pipeline config file and the available values depend on the chosen pipeline. For the Nextclade pipeline, please see [here](https://github.com/loculus-project/loculus/blob/main/preprocessing/nextclade/README.md#custom-preprocessing-functions)."
        },
        "lineageSystem": {
          "groups": ["metadata"],
          "type": "string",
          "description": "Use this on string fields that contain lineages, if you want to enable searches that can include sublineages. The value needs to be a lineage system that is defined under the `lineageSystemDefinitions` key."
        }
      },
      "required": ["name"],
      "allOf": [
        {
          "not": {
            "description": "autocomplete and enableSubstringSearch cannot both be set",
            "required": ["autocomplete", "enableSubstringSearch"]
          }
        },
        {
          "if": {
            "properties": { "generateIndex": { "const": true } },
            "required": ["generateIndex"]
          },
          "then": {
            "properties": {
              "type": { "enum": ["string", "authors"] }
            },
            "errorMessage": "When generateIndex is true, type must be 'string' or 'authors'"
          }
        },
        {
          "if": {
            "properties": { "autocomplete": { "const": true } },
            "required": ["autocomplete"]
          },
          "then": {
            "properties": {
              "type": { "enum": ["string", "authors", "int", "float", "number", "boolean"] }
            },
            "errorMessage": "When autocomplete is true, type must be 'string', 'authors', 'int', 'float', 'number', or 'boolean'"
          }
        },
        {
          "if": {
            "properties": { "enableSubstringSearch": { "const": true } },
            "required": ["enableSubstringSearch"]
          },
          "then": {
            "properties": {
              "type": { "enum": ["string", "authors"] }
            },
            "errorMessage": "When enableSubstringSearch is true, type must be 'string' or 'authors'"
          }
        },
        {
          "if": {
            "properties": { "lineageSystem": { "type": "string" } },
            "required": ["lineageSystem"]
          },
          "then": {
            "properties": {
              "type": { "enum": ["string", "authors"] }
            },
            "errorMessage": "When lineageSystem is set, type must be 'string' or 'authors'"
          }
        },
        {
          "if": {
            "properties": { "rangeSearch": { "const": true } },
            "required": ["rangeSearch"]
          },
          "then": {
            "properties": {
              "type": { "enum": ["int", "float", "number", "date"] }
            },
            "errorMessage": "When rangeSearch is true, type must be numeric or date ('int', 'float', 'number', or 'date')"
          }
        },
        {
          "if": {
            "properties": { "rangeOverlapSearch": { "type": "object" } },
            "required": ["rangeOverlapSearch"]
          },
          "then": {
            "properties": {
              "type": { "enum": ["int", "float", "number", "date"] }
            },
            "errorMessage": "When rangeOverlapSearch is set, type must be numeric or date ('int', 'float', 'number', or 'date')"
          }
        }
      ]
    },
    "organism": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "enabled": {
          "groups": ["organism"],
          "type": "boolean",
          "default": true,
          "description": "Whether this organism is enabled."
        },
        "schema": {
          "groups": ["organism"],
          "docsIncludePrefix": false,
          "type": "object",
          "description": "Object of type [organism schema](#organism-schema-type)",
          "additionalProperties": false,
          "properties": {
            "organismName": {
              "groups": ["schema"],
              "docsIncludePrefix": false,
              "type": "string",
              "description": "Display name for the organism"
            },
            "image": {
              "groups": ["schema"],
              "docsIncludePrefix": false,
              "type": "string",
              "description": "URL to an image that will be shown on the landing page"
            },
            "loadSequencesAutomatically": {
              "groups": ["schema"],
              "docsIncludePrefix": false,
              "type": "boolean",
              "default": true,
              "description": "Whether sequences be loaded automatically on the sequence details page , rather than users having to press a button to do so. (For small genomes, this should probably be true.)"
            },
            "submissionDataTypes": {
              "docsIncludePrefix": false,
              "type": "object",
              "properties": {
                "consensusSequences": {
                  "groups": ["schema"],
                  "type": "boolean",
                  "default": true,
                  "description": "If false, the submission form will not allow submission of consensus sequences (i.e. the sequences file must be omitted). All consensus sequence related parts on the website will be hidden."
                },
                "maxSequencesPerEntry": {
                  "groups": ["schema"],
                  "type": ["integer", "null"],
                  "default": null,
                  "description": "Maximum number of sequences allowed per submission entry. Set to null for unlimited sequences per entry. For single-segment organisms, set to 1 to ensure only one sequence per entry."
                },
                "files": {
                  "type": "object",
                  "properties": {
                    "enabled": {
                      "groups": ["schema"],
                      "type": "boolean",
                      "default": false,
                      "description": "If true, enable support for submitting additional files. S3 needs to be configured and categories need to be configured under `categories`."
                    },
                    "categories": {
                      "groups": ["schema"],
                      "type": "array",
                      "description": "The file categories that can be submitted for this organism.",
                      "items": {
                        "type": "object",
                        "placeholder": "fileCategory",
                        "properties": {
                          "name": {
                            "groups": ["schema"],
                            "type": "string",
                            "description": "The name of the file category, e.g. 'raw_reads'."
                          }
                        },
                        "additionalProperties": false
                      }
                    }
                  },
                  "additionalProperties": false
                }
              },
              "additionalProperties": false
            },
            "files": {
              "groups": ["schema"],
              "docsIncludePrefix": false,
              "description": "An array of output files.",
              "type": "array",
              "placeholder": "file",
              "items": {
                "type": "object",
                "properties": {
                  "name": {
                    "groups": ["schema"],
                    "type": "string",
                    "description": "TODO"
                  },
                  "multipleFiles": {
                    "groups": ["schema"],
                    "type": "boolean",
                    "description": "TODO"
                  }
                },
                "additionalProperties": false
              }
            },
            "metadata": {
              "groups": ["schema"],
              "docsIncludePrefix": false,
              "type": "array",
              "description": "Array of [Metadata fields (type)](#metadata-type) associated with the organism.",
              "items": { "$ref": "#/definitions/metadata" }
            },
            "metadataAdd": {
              "groups": ["schema"],
              "docsIncludePrefix": false,
              "type": "array",
              "description": "Array of [Metadata fields (type)](#metadata-type) associated with the organism, in addtion to the fields in `metadata`.",
              "items": { "$ref": "#/definitions/metadata" }
            },
            "metadataTemplate": {
              "groups": ["schema"],
              "docsIncludePrefix": false,
              "type": "array",
              "description": "Array of strings. Which input fields to add to the downloadable metadata template on the submission and revision page.",
              "items": {
                "type": "string"
              }
            },
            "extraInputFields": {
              "type": "array"
            },
            "nucleotideSequences": {
              "groups": ["schema"],
              "docsIncludePrefix": false,
              "type": "array",
              "description": "Array of strings of nucleotide sequence names. Defaults to a list with just 'main'.",
              "items": {
                "type": "string"
              }
            },
            "richFastaHeaderFields": {
              "groups": ["schema"],
              "docsIncludePrefix": false,
              "type": "array",
              "description": "Which metadata fields to include in the fasta header when downloading sequences from the website when using the 'Display name' FASTA header style option.",
              "items": {
                "type": "string"
              },
              "minItems": 1
            },
            "linkOuts": {
              "groups": ["schema"],
              "docsIncludePrefix": false,
              "type": "array",
              "description": "An array of external tools that can be linked to from the search page. Each linkOut has a name and URL. The URL can contain placeholders in the format [dataType] or [dataType:segment] or [dataType+rich] or [dataType:segment+rich|format] which will be replaced with the corresponding data URLs. `rich` means display name faster headers. You can use [metadata+col1,col2] to specify columns. Valid dataTypes are: unalignedNucleotideSequences, metadata, and alignedNucleotideSequences. You can also use {{this}} notation to URL-encode the contents of the double brackets, and you can {{nest {{these}} }}.",
              "items": {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string",
                    "description": "Display name for the external tool link"
                  },
                  "url": {
                    "type": "string",
                    "description": "URL template with placeholders. Example: 'https://tool.example.com/?data={{[unalignedNucleotideSequences+rich|fasta]}}'"
                  },
                  "maxNumberOfRecommendedEntries": {
                    "type": "integer",
                    "description": "Optional maximum number of recommended entries for the tool beyond which a warning will be shown.'"
                  }
                },
                "required": ["name", "url"]
              }
            },
            "earliestReleaseDate": {
              "groups": ["schema"],
              "docsIncludePrefix": false,
              "type": "object",
              "description": "Configuration object for enabling and configuring the `earliestReleaseDate` metadata field. For each version of an accession, the `earliestReleaseDate` is calculated as the earliest date of the internal release date, the dates in the configured `externalFields` and the value from the previous version of the accession (if there is one). This can be used when having a mix of sequences imported from other databases, as well as sequences released first in this Loculus instance, to have a field that shows the earliest release date regardless of where the sequence was first released.",
              "properties": {
                "enabled": {
                  "groups": ["schema"],
                  "type": "boolean",
                  "description": "Whether to enable the `earliestReleaseDate` metadata field."
                },
                "externalFields": {
                  "groups": ["schema"],
                  "type": "array",
                  "description": "Field names to use when calculating the earliest release date. The fields need to be nullable strings formated with `yyyy-mm-dd`.",
                  "items": {
                    "type": "string"
                  }
                }
              }
            },
            "website": {
              "groups": ["schema"],
              "docsIncludePrefix": false,
              "type": "object",
              "description": "Configuration for how the organism data is displayed on the website",
              "additionalProperties": false,
              "properties": {
                "tableColumns": {
                  "groups": ["schema"],
                  "type": "array",
                  "items": {
                    "type": "string"
                  },
                  "description": "Columns to display in the browse table"
                },
                "defaultOrderBy": {
                  "groups": ["schema"],
                  "type": "string",
                  "description": "Default column to sort the browse table"
                },
                "defaultOrder": {
                  "groups": ["schema"],
                  "type": "string",
                  "enum": ["ascending", "descending"],
                  "description": "Default order direction."
                },
                "referenceIdentifierField": {
                  "groups": ["schema"],
                  "type": "string",
                  "description": "Must be set to use the sub-organism feature. This metadata field is used to determine which suborganism a sequence entry belongs to. N.B. the suborganism feature is incomplete and not ready for production use."
                }
              }
            }
          },
          "required": ["organismName"]
        },
        "preprocessing": {
          "groups": ["organism"],
          "docsIncludePrefix": false,
          "type": "array",
          "description": "Array of [Preprocessing (type)](#preprocessing-type).",
          "additionalProperties": false,
          "items": {
            "type": "object",
            "additionalProperties": false,
            "properties": {
              "version": {
                "groups": ["preprocessing"],
                "docsIncludePrefix": false,
                "oneOf": [
                  {
                    "type": "integer",
                    "minimum": 1
                  },
                  {
                    "type": "array",
                    "items": {
                      "type": "integer",
                      "minimum": 1
                    },
                    "minItems": 1
                  }
                ],
                "description": "Version of the preprocessing pipeline. Can be a single integer or an array of integers."
              },
              "image": {
                "groups": ["preprocessing"],
                "docsIncludePrefix": false,
                "type": "string",
                "description": "Docker image for the preprocessing pipeline."
              },
              "dockerTag": {
                "groups": ["preprocessing"],
                "docsIncludePrefix": false,
                "type": "string",
                "description": "Docker tag for the preprocessing pipeline."
              },
              "replicas": {
                "groups": ["preprocessing"],
                "docsIncludePrefix": false,
                "type": "number",
                "description": "How many replicas of the prepreprocessing pipeline to run."
              },
              "args": {
                "groups": ["preprocessing"],
                "docsIncludePrefix": false,
                "type": "array",
                "items": {
                  "type": "string"
                },
                "description": "Array of Strings. Arguments passed to the preprocessing pipeline."
              },
              "configFile": {
                "groups": ["preprocessing"],
                "docsIncludePrefix": false,
                "type": "object",
                "description": "Object of type [ConfigFile](#nextclade-preprocessing-pipeline-configfile-type), Fields that should be added to the preprocessing pipeline config file.",
                "properties": {
                  "create_embl_file": {
                    "groups": ["nextcladePipelineConfigFile"],
                    "docsIncludePrefix": false,
                    "type": "boolean",
                    "description": "If prepreprocessing should generate an EMBL file for each sequence, note this requires additional metadata fields to be present (taxon_id, scientific_name, molecule_type)."
                  },
                  "alignment_requirement": {
                    "groups": ["nextcladePipelineConfigFile"],
                    "docsIncludePrefix": false,
                    "type": "string",
                    "enum": ["ALL", "ANY"],
                    "description": "If multi-segmented viruses should require ALL segments (that the user provides) align or ANY segment aligns"
                  },
                  "segment_classification_method": {
                    "groups": ["nextcladePipelineConfigFile"],
                    "docsIncludePrefix": false,
                    "type": "string",
                    "enum": ["minimizer", "align", "diamond"],
                    "description": "Method to classify segments for multi-segmented viruses"
                  },
                  "nextclade_dataset_server": {
                    "groups": ["nextcladePipelineConfigFile"],
                    "docsIncludePrefix": false,
                    "type": "string",
                    "description": "Server from which to download nextclade datasets."
                  },
                  "segments": {
                    "groups": ["nextcladePipelineConfigFile"],
                    "docsIncludePrefix": false,
                    "type": "array",
                    "description": "Array of [segment](#nextclade-preprocessing-pipeline-segment-objects-type) objects containing nucleotide sequences, references and their corresponding nextclade datasets.",
                    "items": {
                      "type": "object",
                      "additionalProperties": false,
                      "properties": {
                        "name": {
                          "groups": ["nextcladeSegment"],
                          "docsIncludePrefix": false,
                          "type": "string",
                          "description": "Name of the nucleotide sequence to which this dataset applies - defaults to 'main'."
                        },
                        "references": {
                          "groups": ["nextcladeSegment"],
                          "docsIncludePrefix": false,
                          "type": "array",
                          "description": "Details of the nextclade dataset for each reference",
                          "items": {
                            "type": "object",
                            "additionalProperties": false,
                            "required": ["name"],
                            "properties": {
                              "name": {
                                "groups": ["nextcladeSegment"],
                                "docsIncludePrefix": false,
                                "type": "string",
                                "description": "Name of the reference to use for alignment  - set name to 'singleReference' if there is only one reference."
                              },
                              "nextclade_dataset_name": {
                                "groups": ["nextcladeSegment"],
                                "docsIncludePrefix": false,
                                "type": "string",
                                "description": "Name of the nextclade dataset to use to align the sequence - required if this sequence should be aligned."
                              },
                              "nextclade_dataset_tag": {
                                "groups": ["nextcladeSegment"],
                                "docsIncludePrefix": false,
                                "type": "string",
                                "description": "Optional. Tag of the nextclade dataset to use to align the sequence."
                              },
                              "nextclade_dataset_server": {
                                "groups": ["nextcladeSegment"],
                                "docsIncludePrefix": false,
                                "type": "string",
                                "description": "Optional. Server from which to download the nextclade dataset to use to align the sequence. If not specified, use the global nextclade_dataset_server."
                              },
                              "accepted_dataset_matches": {
                                "groups": ["nextcladeSegment"],
                                "docsIncludePrefix": false,
                                "type": "array",
                                "description": "Optional. Array of strings. The dataset names that are accepted as matches when using nextclade sort or diamond, if not specified use only accept matches with the same name or nextclade_dataset_name."
                              },
                              "genes": {
                                "groups": ["nextcladeSegment"],
                                "docsIncludePrefix": false,
                                "type": "array",
                                "description": "Array of strings. The names of the genes to be extracted from the sequence alignment results (should correspond to gene names in the nextclade dataset)."
                              }
                            }
                          }
                        }
                      }
                    }
                  },
                  "require_nextclade_sort_match": {
                    "groups": ["nextcladePipelineConfigFile"],
                    "docsIncludePrefix": false,
                    "type": "boolean",
                    "description": "If true run nextclade sort and require that the highest scoring match is in the config.accepted_dataset_matches"
                  },
                  "minimizer_url": {
                    "groups": ["nextcladePipelineConfigFile"],
                    "docsIncludePrefix": false,
                    "type": "string",
                    "description": "Minimizer used for nextclade sort (if require_nextclade_sort_match or if segments are to be assigned using nextclade sort)"
                  },
                  "backend_request_timeout_seconds": {
                    "groups": ["nextcladePipelineConfigFile"],
                    "docsIncludePrefix": false,
                    "type": "integer",
                    "description": "Timeout in seconds for requests to the backend server for data to process"
                  }
                }
              }
            },
            "required": ["version", "image"]
          }
        },
        "ingest": {
          "groups": ["organism"],
          "docsIncludePrefix": false,
          "type": "object",
          "description": "Object of type [Ingest](#ingest-type)",
          "additionalProperties": false,
          "properties": {
            "image": {
              "groups": ["ingest"],
              "docsIncludePrefix": false,
              "type": "string",
              "default": "ghcr.io/loculus-project/ingest",
              "description": "Docker image for the ingest pipeline"
            },
            "configFile": {
              "groups": ["ingest"],
              "docsIncludePrefix": false,
              "type": "object",
              "description": "Object of type [ConfigFile](#ingest-configfile-type), Fields that should be added to the ingest pipeline config file",
              "properties": {
                "taxon_id": {
                  "groups": ["ingest"],
                  "docsIncludePrefix": false,
                  "type": "integer",
                  "description": "NCBI taxon ID for the organism"
                },
                "segment_identification": {
                  "groups": ["ingest"],
                  "docsIncludePrefix": false,
                  "type": "object",
                  "description": "If multi-segmented organism, how to identify segments",
                  "properties": {
                    "method": {
                      "groups": ["ingestPipelineConfigFile"],
                      "docsIncludePrefix": false,
                      "type": "string",
                      "enum": ["align", "minimizer"],
                      "description": "Method to identify segments, uses either nextclade align or nextclade sort"
                    },
                    "nextclade_dataset_server": {
                      "groups": ["ingestPipelineConfigFile"],
                      "docsIncludePrefix": false,
                      "type": "string"
                    },
                    "nextclade_dataset_name": {
                      "groups": ["ingestPipelineConfigFile"],
                      "docsIncludePrefix": false,
                      "type": "string",
                      "description": "Required if method is align"
                    },
                    "minimizer_parser": {
                      "groups": ["ingestPipelineConfigFile"],
                      "docsIncludePrefix": false,
                      "type": "array",
                      "description": "Required if method is minimizer, list of the name of each '_' - separated metadata field in the minimizer index"
                    },
                    "minimizer_url": {
                      "groups": ["ingestPipelineConfigFile"],
                      "docsIncludePrefix": false,
                      "type": "string",
                      "description": "Required if method is minimizer"
                    },
                    "backend_request_timeout_seconds": {
                      "groups": ["ingestPipelineConfigFile"],
                      "docsIncludePrefix": false,
                      "type": "integer",
                      "description": "Timeout in seconds for requests to the backend server for data to process"
                    },
                    "time_between_approve_requests_seconds": {
                      "groups": ["ingestPipelineConfigFile"],
                      "docsIncludePrefix": false,
                      "type": "integer",
                      "description": "Time in seconds to wait between approve requests"
                    }
                  },
                  "required": ["method"]
                },
                "grouping_override": {
                  "groups": ["ingest"],
                  "docsIncludePrefix": false,
                  "type": "string",
                  "description": "If multi-segmented organism, segment grouping overrides"
                },
                "metadata_filter": {
                  "groups": ["ingest"],
                  "docsIncludePrefix": false,
                  "type": "object",
                  "description": "Filter ingested sequences based on value in metadata. Filter should be a list of metadata field and value pairs."
                }
              },
              "required": ["taxon_id"]
            }
          }
        },
        "enaDeposition": {
          "type": "object",
          "description": "TODO"
        },
        "referenceGenomes": {
          "groups": ["organism"],
          "docsIncludePrefix": false,
          "type": "array",
          "description": "Segment-first reference genome structure. Each segment must have a name and a list of reference genomes. Each reference contains a nucleotide sequence and optionally genes.",
          "items": {
            "type": "object",
            "description": "Segment details, including name and references",
            "additionalProperties": false,
            "properties": {
              "name": {
                "groups": ["referenceGenomes"],
                "docsIncludePrefix": false,
                "type": "string",
                "description": "Name of the segment (e.g., 'S', 'M', 'L', or 'main' for single-segmented organisms)"
              },
              "displayName": {
                "groups": ["referenceGenomes"],
                "docsIncludePrefix": false,
                "type": "string",
                "description": "Display name of the segment used on the website (e.g., 'S', 'M', 'L', or 'main' for single-segmented organisms)"
              },
              "references": {
                "type": "array",
                "description": "Array of reference genomes for this segment",
                "items": {
                  "type": "object",
                  "description": "Reference genome details",
                  "additionalProperties": false,
                  "properties": {
                    "name": {
                      "groups": ["nucleotide-sequence"],
                      "docsIncludePrefix": false,
                      "type": "string",
                      "description": "Name of the reference genome"
                    },
                    "displayName": {
                      "groups": ["nucleotide-sequence"],
                      "docsIncludePrefix": false,
                      "type": "string",
                      "description": "Display name of the reference genome used on the website (e.g., 'h1n1pdm/California/07/2009')"
                    },
                    "sequence": {
                      "groups": ["nucleotide-sequence"],
                      "docsIncludePrefix": false,
                      "type": "string",
                      "description": "The nucleotide sequence for this segment/reference combination"
                    },
                    "insdcAccessionFull": {
                      "groups": ["nucleotide-sequence"],
                      "docsIncludePrefix": false,
                      "type": "string",
                      "description": "INSDC accession of the sequence"
                    },
                    "genes": {
                      "groups": ["gene"],
                      "docsIncludePrefix": false,
                      "type": "array",
                      "description": "Genes for this segment/reference combination",
                      "items": {
                        "type": "object",
                        "description": "Gene details, including name and references",
                        "additionalProperties": false,
                        "properties": {
                          "name": {
                            "groups": ["gene"],
                            "docsIncludePrefix": false,
                            "type": "string",
                            "description": "The name of the gene"
                          },
                          "sequence": {
                            "groups": ["gene"],
                            "docsIncludePrefix": false,
                            "type": "string",
                            "description": "The amino acid or nucleotide sequence for this gene"
                          }
                        },
                        "required": ["name", "sequence"]
                      },
                      "additionalProperties": false
                    }
                  },
                  "required": ["name", "sequence"]
                }
              },
              "additionalProperties": false
            }
          }
        }
      },
      "required": ["schema"]
    },
    "resourceSpec": {
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "requests": {
          "type": "object",
          "properties": {
            "memory": { "type": "string" },
            "cpu": { "type": "string" }
          }
        },
        "limits": {
          "type": "object",
          "properties": {
            "memory": { "type": "string" },
            "cpu": { "type": "string" }
          }
        }
      }
    },
    "imageSpec": {
      "type": "object",
      "properties": {
        "repository": {
          "groups": ["image"],
          "type": "string",
          "description": "The repository to pull the image from. Example: ghcr.io/loculus-project/website"
        },
        "tag": {
          "groups": ["image"],
          "type": "string",
          "description": "The tag to pull. Examples: latest, 0.5.7. Can include a digest to absolutely pin the image (tags can move): v0.7.10.1@sha256:96e431192d6493ed71ac10bc273710df21e7c520a77bebaa7d94ff859264d36c"
        },
        "pullPolicy": {
          "groups": ["image"],
          "type": "string",
          "enum": ["Always", "IfNotPresent", "Never"],
          "description": "The pull policy to use. Always: always pull the image. IfNotPresent: pull if not present locally. Never: never pull, use local image only."
        }
      },
      "required": ["repository", "pullPolicy"],
      "additionalProperties": false
    }
  },
  "type": "object",
  "additionalProperties": false,
  "properties": {
    "name": {
      "groups": ["general"],
      "type": "string",
      "default": "Loculus",
      "description": "The name of the Loculus instance"
    },
    "logo": {
      "groups": ["general"],
      "type": "object",
      "additionalProperties": false,
      "description": "Configuration for the logo",
      "properties": {
        "url": {
          "groups": ["general"],
          "type": "string",
          "description": "URL path to the logo image file"
        },
        "width": {
          "groups": ["general"],
          "type": "integer",
          "default": 100,
          "description": "Width of the logo in pixels"
        },
        "height": {
          "groups": ["general"],
          "type": "integer",
          "default": 100,
          "description": "Height of the logo in pixels"
        }
      }
    },
    "accessionPrefix": {
      "groups": ["general"],
      "group": "general",
      "type": "string",
      "default": "LOC_",
      "description": "Prefix used for accession numbers"
    },
    "zstdCompressionLevel": {
      "groups": ["general"],
      "group": "general",
      "type": "integer",
      "default": 10,
      "minimum": -7,
      "maximum": 22,
      "description": "Zstandard compression level for sequence data. Higher means better compression ratio but higher CPU/memory usage."
    },
    "pipelineVersionUpgradeCheckIntervalSeconds": {
      "groups": ["general"],
      "group": "general",
      "type": "integer",
      "default": 10,
      "minimum": 1,
      "description": "Interval in seconds at which the backend checks for and adopts newer preprocessing pipeline versions. Pipeline version upgrades are irreversible one-time changes. The check runs on backend startup (with initial delay of min(interval, 600) seconds to avoid DB load). Higher values reduce database load but delay adoption of new pipeline versions."
    },
    "environment": {
      "groups": ["general"],
      "type": "string",
      "enum": ["local", "server"],
      "default": "server",
      "description": "Deployment environment. local for development, server for production"
    },
    "imagePullPolicy": {
      "groups": ["general"],
      "type": "string",
      "enum": ["Always", "IfNotPresent", "Never"],
      "default": "Always",
      "description": "Global image pull policy applied to all deployments. Can be overridden per-image in the images section for some images. Always: always pull the image. IfNotPresent: pull if not present locally. Never: never pull, use local image only."
    },
    "localHost": {
      "groups": ["general"],
      "type": "string",
      "default": "localhost",
      "description": "Host string used for local development"
    },
    "host": {
      "groups": ["general"],
      "type": "string",
      "description": "Hostname where Loculus will be accessible"
    },
    "bannerMessage": {
      "groups": ["general"],
      "type": "string",
      "default": "This is a demonstration environment. It may contain non-accurate test data and should not be used for real-world applications. Data will be deleted regularly.",
      "description": "Banner message (as HTML) to display at the very top of the page"
    },
    "bannerMessageURL": {
      "groups": ["general"],
      "type": "string",
      "default": "",
      "description": "URL to fetch banner message HTML from - if set will be polled regularly for banner text, e.g. notice of temporary downtime, and overwrite the 'bannerMessage'-config"
    },
    "submissionBannerMessage": {
      "groups": ["general"],
      "type": "string",
      "default": "",
      "description": "Banner message (as HTML) to display on submission pages"
    },
    "submissionBannerMessageURL": {
      "groups": ["general"],
      "type": "string",
      "default": "",
      "description": "URL to fetch submission banner message HTML from - if set will be polled regularly for banner text on submission pages"
    },
    "welcomeMessageHTML": {
      "groups": ["general"],
      "type": ["string", "null"],
      "description": "A custom welcome message to be shown on the landing page"
    },
    "additionalHeadHTML": {
      "groups": ["general"],
      "type": "string",
      "description": "Additional HTML to inject into the <head> of pages"
    },
    "createTestAccounts": {
      "groups": ["general"],
      "type": "boolean",
      "description": "If true, creates the users testuser and superuser"
    },
    "robotsNoindexHeader": {
      "groups": ["general"],
      "type": "boolean",
      "description": "If true, adds a noindex header to prevent search engine indexing"
    },
    "seqSets": {
      "groups": ["general"],
      "type": "object",
      "additionalProperties": false,
      "properties": {
        "enabled": {
          "groups": ["general"],
          "type": "boolean",
          "description": "Enable/disable SeqSets. If false, `seqSets.crossRef` can be omitted."
        },
        "crossRef": {
          "groups": ["general"],
          "type": "object",
          "additionalProperties": false,
          "description": "Configuration for CrossRef integration. Set to `null` to disable CrossRef integration (you can still use SeqSets without CrossRef DOIs).",
          "properties": {
            "DOIPrefix": {
              "groups": ["general"],
              "type": "string",
              "description": "The DOI prefix for SeqSets"
            },
            "endpoint": {
              "groups": ["general"],
              "type": "string",
              "description": "The API endpoint for CrossRef"
            },
            "databaseName": {
              "groups": ["general"],
              "type": "string",
              "description": "The database name for CrossRef"
            },
            "email": {
              "groups": ["general"],
              "type": "string",
              "format": "email",
              "description": "The email address associated with the CrossRef account"
            },
            "organization": {
              "groups": ["general"],
              "type": "string",
              "description": "The organization name for CrossRef"
            },
            "hostUrl": {
              "groups": ["general"],
              "type": "string",
              "description": "The host URL for CrossRef callbacks"
            }
          }
        },
        "fieldsToDisplay": {
          "groups": ["general"],
          "type": "array",
          "description": "Fields to display in the SeqSets table",
          "items": {
            "type": "object",
            "additionalProperties": false,
            "properties": {
              "field": {
                "type": "string",
                "description": "The metadata field name to display"
              },
              "displayName": {
                "type": "string",
                "description": "The display name for the field"
              }
            },
            "required": ["field", "displayName"]
          }
        }
      }
    },
    "gitHubMainUrl": {
      "groups": ["general"],
      "type": "string",
      "default": "https://github.com/loculus-project/loculus",
      "description": "The link that the GitHub icon in the footer points to"
    },
    "sequenceFlagging": {
      "type": "object",
      "properties": {
        "github": {
          "groups": ["general"],
          "description": "Settings to enable sequence reporting via GitHub. If set, a button will be enabled on sequence details views to report issues with a sequence.",
          "type": "object",
          "properties": {
            "organization": {
              "group": ["general"],
              "type": "string",
              "description": "A github organization or username."
            },
            "repository": {
              "group": ["general"],
              "type": "string",
              "description": "A github repository belonging to the given organization."
            },
            "issueTemplate": {
              "group": ["general"],
              "type": "string",
              "description": "An optional issuetemplate to use."
            }
          },
          "required": ["organization", "repository"],
          "additionalProperties": false
        }
      },
      "required": ["github"],
      "additionalProperties": false
    },
    "public": {
      "group": ["website"],
      "type": "object",
      "description": "TODO",
      "properties": {
        "properties": {
          "backendUrl": {
            "groups": ["website"],
            "type": "string",
            "description": "Overwrite the URL where the Loculus backend is publicly available."
          },
          "websiteUrl": {
            "groups": ["website"],
            "type": "string",
            "description": "Overwrite the URL where the website is publicly available."
          },
          "keycloakUrl": {
            "groups": ["website"],
            "type": "string",
            "description": "Overwrite the URL where Keycloak is publicly available."
          },
          "lapisUrlTemplate": {
            "groups": ["website"],
            "type": "string",
            "description": "Overwrite the URLs where the LAPIS instances are publicly available. Must contain `%organism%` as a placeholder."
          }
        }
      }
    },
    "website": {
      "groups": ["website"],
      "type": "object",
      "description": "Website specific setting",
      "properties": {
        "websiteConfig": {
          "groups": ["website"],
          "type": "object",
          "additionalProperties": false,
          "description": "Settings for the `website_config.json`",
          "properties": {
            "enableLoginNavigationItem": {
              "groups": ["website"],
              "type": "boolean",
              "default": true,
              "description": "Whether the website should show the login button."
            },
            "enableSubmissionNavigationItem": {
              "groups": ["website"],
              "type": "boolean",
              "default": true,
              "description": "Whether the website should show \"Submit\" link in the top navigation bar."
            },
            "enableSubmissionPages": {
              "groups": ["website"],
              "type": "boolean",
              "default": true,
              "description": "Whether to completely disable submission related pages. Setting this to false is useful when hosting Loculus for analysis-only purposes."
            }
          }
        },
        "runtimeConfig": {
          "type": "object",
          "additionalProperties": false,
          "properties": {
            "public": {
              "groups": ["website"],
              "type": "object",
              "description": "Settings for the `public` section of the `runtime_config.json`",
              "properties": {}
            }
          }
        }
      }
    },
    "auth": {
      "groups": ["auth"],
      "type": "object",
      "additionalProperties": false,
      "description": "User authentication (Keycloak settings)",
      "properties": {
        "smtp": {
          "groups": ["auth"],
          "type": "object",
          "additionalProperties": false,
          "description": "Configuration for email sending",
          "properties": {
            "host": {
              "groups": ["auth"],
              "type": "string",
              "description": "SMTP server hostname"
            },
            "port": {
              "groups": ["auth"],
              "type": "integer",
              "description": "SMTP server port"
            },
            "user": {
              "groups": ["auth"],
              "type": "string",
              "description": "SMTP username for authentication"
            },
            "replyTo": {
              "groups": ["auth"],
              "type": "string",
              "format": "email",
              "description": "Reply-to email address for sent emails"
            },
            "from": {
              "groups": ["auth"],
              "type": "string",
              "format": "email",
              "description": "From email address for sent emails"
            },
            "envelopeFrom": {
              "groups": ["auth"],
              "type": "string",
              "format": "email",
              "description": "Envelope from address for sent emails"
            }
          }
        },
        "verifyEmail": {
          "groups": ["auth"],
          "type": "boolean",
          "default": true,
          "description": "If true, requires email verification for new accounts"
        },
        "resetPasswordAllowed": {
          "groups": ["auth"],
          "type": "boolean",
          "default": true,
          "description": "If true, allows users to reset their passwords"
        },
        "registrationAllowed": {
          "groups": ["auth"],
          "type": "boolean",
          "default": true,
          "description": "If true, allows users to register new accounts in Keycloak."
        },
        "identityProviders": {
          "type": "object",
          "additionalProperties": false,
          "properties": {
            "orcid": {
              "type": "object",
              "additionalProperties": false,
              "properties": {
                "clientId": {
                  "groups": ["auth"],
                  "type": "string",
                  "description": "The client ID to use for ORCiD integration."
                }
              }
            }
          }
        }
      }
    },
    "insecureCookies": {
      "groups": ["auth"],
      "type": "boolean",
      "default": false,
      "description": "If true, allows insecure cookies."
    },
    "registrationMessage": {
      "groups": ["auth"],
      "type": "string",
      "default": "You must agree to the <a href='http://main.loculus.org/terms'>terms of use</a>.",
      "description": "Message displayed during user registration, typically including terms of service."
    },
    "runDevelopmentMainDatabase": {
      "groups": ["db"],
      "type": "boolean",
      "default": true,
      "description": "If true, runs a development database within the cluster."
    },
    "runDevelopmentKeycloakDatabase": {
      "groups": ["db"],
      "type": "boolean",
      "default": true,
      "description": "If true, runs a development Keycloak database within the cluster."
    },
    "developmentDatabasePersistence": {
      "groups": ["db"],
      "type": "boolean",
      "default": true,
      "description": "If true, makes the database on the argocd preview persistent."
    },
    "runDevelopmentS3": {
      "groups": ["db"],
      "type": "boolean",
      "default": true,
      "description": "If true, runs a development MinIO S3 instance within the cluster."
    },
    "disableWebsite": {
      "groups": ["services"],
      "type": "boolean",
      "default": false,
      "description": "If true, disables the frontend website deployment."
    },
    "disableBackend": {
      "groups": ["services"],
      "type": "boolean",
      "default": false,
      "description": "If true, disables the backend API deployment."
    },
    "disablePreprocessing": {
      "groups": ["services"],
      "type": "boolean",
      "default": false,
      "description": "If true, disables preprocessing pipelines."
    },
    "disableIngest": {
      "groups": ["services"],
      "type": "boolean",
      "default": false,
      "description": "If true, disables ingestion services."
    },
    "disableEnaSubmission": {
      "groups": ["services"],
      "type": "boolean",
      "default": false,
      "description": "If true, disables ENA (European Nucleotide Archive) submission service."
    },
    "organisms": {
      "groups": ["organism-conf"],
      "type": "object",
      "description": "An object where the keys are the organism IDs and values are an [Organism (type)](#organism-type)",
      "patternProperties": {
        "^[a-z0-9-]+$": { "$ref": "#/definitions/organism" }
      }
    },
    "defaultOrganismConfig": {
      "description": "Template configuration for organisms - can contain any partial organism configuration for YAML inheritance"
    },
    "defaultOrganisms": {
      "type": "object",
      "patternProperties": {
        "^[a-z0-9-]+$": { "$ref": "#/definitions/organism" }
      }
    },
    "lineageSystemDefinitions": {
      "groups": ["organism-conf"],
      "type": "object",
      "description": "An object where the keys are the lineage system names and values are links to lineage system definition files per pipeline version (See [Lineage system definitions](#lineage-system-definitions))",
      "additionalProperties": false,
      "patternProperties": {
        "^[a-zA-Z0-9-]+$": {
          "groups": ["lineage-system-definitions"],
          "placeholder": "name",
          "type": "object",
          "description": "A map from pipeline versions to file URLs.",
          "additionalProperties": false,
          "patternProperties": {
            "^[0-9]+$": {
              "groups": ["lineage-system-definitions"],
              "placeholder": "pipelineVersion",
              "type": "string",
              "format": "uri",
              "description": "The URL to the lineage definition file for that lineage system and that pipeline version."
            }
          }
        }
      }
    },
    "enforceHTTPS": {
      "type": "boolean",
      "default": true,
      "description": "TODO"
    },
    "ingestLimitSeconds": {
      "type": "integer",
      "default": 1800,
      "description": "TODO"
    },
    "dataUseTerms": {
      "type": "object",
      "properties": {
        "enabled": {
          "groups": ["general"],
          "type": "boolean",
          "description": "Whether this Loculus instance handles data use terms."
        },
        "urls": {
          "type": "object",
          "properties": {
            "open": {
              "groups": ["general"],
              "type": "string",
              "description": "A URL describing the open data use terms."
            },
            "restricted": {
              "groups": ["general"],
              "type": "string",
              "description": "A URL describing the restricted data use terms."
            }
          },
          "required": ["open", "restricted"],
          "additionalProperties": false
        }
      },
      "required": ["enabled", "urls"],
      "additionalProperties": false
    },
    "fileSharing": {
      "type": "object",
      "groups": ["general"],
      "description": "Settings related to the file sharing feature.",
      "properties": {
        "outputFileUrlType": {
          "type": "string",
          "groups": ["general"],
          "enum": ["website", "backend", "s3"],
          "description": "Whether the backend should supply file URLs as links to the website, the backend itself, or directly to the S3 server objects."
        }
      },
      "required": ["outputFileUrlType"],
      "additionalProperties": false
    },
    "s3": {
      "type": "object",
      "properties": {
        "enabled": {
          "groups": ["s3"],
          "type": "boolean",
          "default": false,
          "description": "Whether to enable S3. S3 is needed for the file sharing feature."
        },
        "bucket": {
          "type": "object",
          "properties": {
            "endpoint": {
              "groups": ["s3"],
              "type": "string",
              "default": "s3-<host value>",
              "description": "The endpoint where S3 is running. Do not include a protocol prefix."
            },
            "region": {
              "groups": ["s3"],
              "type": "string",
              "description": "The region where the bucket is located."
            },
            "bucket": {
              "groups": ["s3"],
              "type": "string",
              "description": "The name of the bucket."
            }
          },
          "required": ["bucket"],
          "additionalProperties": false
        }
      },
      "required": ["enabled"],
      "dependencies": {
        "enabled": {
          "oneOf": [
            {
              "properties": {
                "enabled": { "const": false }
              }
            },
            {
              "properties": {
                "enabled": { "const": true }
              },
              "required": ["bucket"]
            }
          ]
        }
      },
      "additionalProperties": false
    },
    "subdomainSeparator": {
      "type": "string",
      "default": "-"
    },
    "getSubmissionListLimitSeconds": {
      "type": "integer",
      "default": 600
    },
    "replicas": {
      "type": "object",
      "properties": {
        "website": {
          "type": "integer",
          "description": "Number of replicas for the website deployment",
          "default": 1
        },
        "backend": {
          "type": "integer",
          "description": "Number of replicas for the backend deployment",
          "default": 1
        },
        "lapis": {
          "type": "integer",
          "description": "Number of replicas for the LAPIS deployment",
          "default": 1
        }
      },
      "additionalProperties": false
    },
    "preprocessingTimeout": {
      "type": "integer",
      "description": "TODO",
      "default": 600
    },
    "enaDeposition": {
      "type": "object",
      "description": "TODO",
      "properties": {
        "enaUniqueSuffix": {
          "type": "string",
          "description": "Suffix to add to ENA project alias",
          "default": "Loculus"
        },
        "enaIsBroker": {
          "type": "boolean",
          "description": "If ENA broker account is used",
          "default": false
        },
        "submitToEnaProduction": {
          "type": "boolean",
          "description": "If true, the ENA submission will be sent to the production ENA server. If false, it will be sent to the test ENA server.",
          "default": false
        },
        "enaDbName": {
          "type": "string",
          "description": "Name of Loculus instance in ENA",
          "default": "Loculus"
        },
        "enaApprovedListTestUrl": {
          "type": "string",
          "description": "URL to the test ENA approved sequence list (typically hosted on a Github repo)"
        },
        "enaSuppressedListTestUrl": {
          "type": "string",
          "description": "URL to the ENA suppressed sequence list (typically hosted on a Github repo)"
        }
      }
    },
    "images": {
      "groups": ["general"],
      "type": "object",
      "description": "Which docker images to use. You can specify an [image spec (type)](#image-spec-type) for `lapis`, `lapisSilo`, `loculusSilo`, `website` and `backend.`",
      "properties": {
        "lapis": { "$ref": "#/definitions/imageSpec" },
        "lapisSilo": { "$ref": "#/definitions/imageSpec" },
        "loculusSilo": { "$ref": "#/definitions/imageSpec" },
        "website": { "$ref": "#/definitions/imageSpec" },
        "backend": { "$ref": "#/definitions/imageSpec" }
      },
      "additionalProperties": false
    },
    "silo": {
      "groups": ["silo"],
      "type": "object",
      "description": "Configuration for the SILO component",
      "properties": {
        "apiThreadsForHttpConnections": {
          "groups": ["silo"],
          "type": "integer",
          "description": "Number of threads for HTTP connections in SILO API",
          "default": 16,
          "minimum": 1
        }
      },
      "additionalProperties": false
    },
    "registrationTermsMessage": {
      "type": "string",
      "description": "TODO",
      "default": "You must agree to the <a href=\"http://main.loculus.org/terms\">terms of use</a>."
    },
    "siloImport": {
      "type": "object",
      "description": "Configuration for SILO import process",
      "properties": {
        "siloTimeoutSeconds": {
          "type": "integer",
          "description": "Timeout for SILO preprocessing runs in seconds",
          "default": 3600,
          "minimum": 1
        },
        "hardRefreshIntervalSeconds": {
          "type": "integer",
          "description": "Interval in seconds for forcing a hard refresh (re-download) of data, regardless of ETag",
          "default": 3600,
          "minimum": 1
        },
        "pollIntervalSeconds": {
          "type": "integer",
          "description": "Interval in seconds between checking for new data",
          "default": 30,
          "minimum": 1
        }
      },
      "additionalProperties": false,
      "default": {
        "siloTimeoutSeconds": 3600,
        "hardRefreshIntervalSeconds": 3600,
        "pollIntervalSeconds": 30
      }
    },
    "gitHubEditLink": {
      "type": "string",
      "description": "TODO",
      "default": "https://github.com/loculus-project/loculus/edit/main/monorepo/website/"
    },
    "defaultResources": {
      "type": "object",
      "properties": {
        "requests": {
          "type": "object",
          "properties": {
            "memory": { "type": "string" },
            "cpu": { "type": "string" }
          },
          "additionalProperties": false
        },
        "limits": {
          "type": "object",
          "properties": {
            "memory": { "type": "string" },
            "cpu": { "type": "string" }
          },
          "additionalProperties": false
        }
      },
      "additionalProperties": false
    },
    "resources": {
      "type": "object",
      "properties": {
        "website": { "$ref": "#/definitions/resourceSpec" },
        "docs": { "$ref": "#/definitions/resourceSpec" },
        "ena-submission": { "$ref": "#/definitions/resourceSpec" },
        "ena-submission-list-cronjob": { "$ref": "#/definitions/resourceSpec" },
        "ingest": { "$ref": "#/definitions/resourceSpec" },
        "keycloak": { "$ref": "#/definitions/resourceSpec" },
        "silo": { "$ref": "#/definitions/resourceSpec" },
        "lapis": { "$ref": "#/definitions/resourceSpec" },
        "silo-preprocessing": { "$ref": "#/definitions/resourceSpec" },
        "backend": { "$ref": "#/definitions/resourceSpec" },
        "preprocessing": { "$ref": "#/definitions/resourceSpec" },
        "organismSpecific": {
          "type": "object",
          "patternProperties": {
            ".*": {
              "type": "object",
              "properties": {
                "website": { "$ref": "#/definitions/resourceSpec" },
                "ena-submission": { "$ref": "#/definitions/resourceSpec" },
                "ena-submission-list-cronjob": {
                  "$ref": "#/definitions/resourceSpec"
                },
                "ingest": { "$ref": "#/definitions/resourceSpec" },
                "keycloak": { "$ref": "#/definitions/resourceSpec" },
                "silo": { "$ref": "#/definitions/resourceSpec" },
                "lapis": { "$ref": "#/definitions/resourceSpec" },
                "silo-preprocessing": { "$ref": "#/definitions/resourceSpec" },
                "backend": { "$ref": "#/definitions/resourceSpec" },
                "preprocessing": { "$ref": "#/definitions/resourceSpec" }
              },
              "additionalProperties": false
            }
          },
          "additionalProperties": false
        }
      }
    },
    "secrets": {
      "description": "TODO"
    },
    "backendExtraArgs": {
      "type": "array",
      "description": "TODO",
      "items": {
        "type": "string"
      }
    },
    "previewDocs": {
      "description": "TODO"
    },
    "ingest": {
      "type": "object",
      "properties": {
        "ncbiGatewayUrl": {
          "type": ["string", "null"]
        },
        "mirrorBucket": {
          "type": ["string", "null"],
          "description": "Specifies the location of the public mirrored NCBI datasets bucket, where data is stored in the format {TAXON_ID}.zip. If provided with any non-null string, this setting takes priority over ncbiGatewayUrl."
        }
      },
      "additionalProperties": false
    },
    "branch": {
      "type": ["string", "integer"],
      "description": "TODO"
    },
    "sha": {
      "type": ["string", "integer"],
      "description": "TODO"
    },
    "shortbranch": {
      "type": ["string", "integer"],
      "description": "TODO - this is required/set by ArgoCD"
    },
    "podPriorityClassName": {
      "type": "string",
      "description": "TODO - found in PPX production.yaml"
    },
    "testconfig": {
      "description": "TODO"
    }
  },
  "required": ["name"]
}

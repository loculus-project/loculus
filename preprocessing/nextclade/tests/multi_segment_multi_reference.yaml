# Expects that only a single segment is present per sequence entry.
batch_size: 100
alignment_requirement: ALL
log_level: DEBUG
nextclade_dataset_server: TEST
segments:
  - name: L
    references:
    - reference_name: singleReference
      nextclade_dataset_name: CCHF/L
      genes: [RdRp]
  - name: S
    references:
    - reference_name: 1and6
      nextclade_dataset_name: CCHF/S-1and6
      genes: [NP]
    - reference_name: 2to5
      nextclade_dataset_name: CCHF/S-2to5
      genes: [NP]
organism: multi-reference-cchf-test
processing_spec:
  subtype_S:
    args:
      type: str
      segment: S
    function: identity
    inputs:
      input: ASSIGNED_REFERENCE
    required: true
  totalInsertedNucs_S:
    args:
      segment: S
      type: int
    function: identity
    inputs:
      input: nextclade.totalInsertions
  totalSnps_S:
    args:
      segment: S
      type: int
    function: identity
    inputs:
      input: nextclade.totalSubstitutions
  totalInsertedNucs_L:
    args:
      segment: L
      type: int
    function: identity
    inputs:
      input: nextclade.totalInsertions
  totalSnps_L:
    args:
      segment: L
      type: int
    function: identity
    inputs:
      input: nextclade.totalSubstitutions
  length_L:
    args:
      segment: L
      type: int
    function: identity
    inputs:
      input: length_L
  length_S:
    args:
      segment: S
      type: int
    function: identity
    inputs:
      input: length_S

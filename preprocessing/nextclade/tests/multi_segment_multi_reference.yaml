# Expects that only a single segment is present per sequence entry.
batch_size: 100
alignment_requirement: ALL
log_level: DEBUG
nextclade_dataset_server: TEST
segment_classification_method: diamond
diamond_dmnd_url: FAKE_URL
segments:
  - name: L
    references:
    - referenceName: singleReference
      nextclade_dataset_name: CCHF/L
      accepted_dataset_matches: [L]
      genes: [RdRp]
  - name: S
    references:
    - referenceName: 1and6
      nextclade_dataset_name: CCHF/S-1and6
      accepted_dataset_matches: [S-1and6]
      genes: [NP]
    - referenceName: 2to5
      nextclade_dataset_name: CCHF/S-2to5
      accepted_dataset_matches: [S-2to5]
      genes: [NP]
organism: multi-reference-cchf-test
processing_spec:
  subtype_S:
    args:
      type: str
      segment: S
    function: identity
    inputs:
      input: ASSIGNED_REFERENCE
    required: true
  totalInsertedNucs_S:
    args:
      segment: S
      type: int
    function: identity
    inputs:
      input: nextclade.totalInsertions
  totalSnps_S:
    args:
      segment: S
      type: int
    function: identity
    inputs:
      input: nextclade.totalSubstitutions
  totalInsertedNucs_L:
    args:
      segment: L
      type: int
    function: identity
    inputs:
      input: nextclade.totalInsertions
  totalSnps_L:
    args:
      segment: L
      type: int
    function: identity
    inputs:
      input: nextclade.totalSubstitutions
  length_L:
    args:
      segment: L
      type: int
    function: identity
    inputs:
      input: length_L
  length_S:
    args:
      segment: S
      type: int
    function: identity
    inputs:
      input: length_S

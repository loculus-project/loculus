<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="SEQUENCE" height="521px" preserveAspectRatio="none" style="width:741px;height:521px;background:#FFFFFF;" version="1.1" viewBox="0 0 741 521" width="741px" zoomAndPan="magnify"><defs/><g><rect fill="none" height="46.6211" style="stroke:#000000;stroke-width:1.5;" width="662.1045" x="10" y="172.4199"/><rect fill="none" height="46.6211" style="stroke:#000000;stroke-width:1.5;" width="662.1045" x="10" y="320.9727"/><g><title>(Pre-)Processing Pipeline</title><rect fill="#000000" fill-opacity="0.00000" height="375.7266" width="8" x="107.3281" y="67.4883"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="111" x2="111" y1="67.4883" y2="443.2148"/></g><g><title>Loculus Backend</title><rect fill="#000000" fill-opacity="0.00000" height="375.7266" width="8" x="438.231" y="67.4883"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="441.8994" x2="441.8994" y1="67.4883" y2="443.2148"/></g><g><title>S3 / Object Storage</title><rect fill="#000000" fill-opacity="0.00000" height="375.7266" width="8" x="584.8335" y="67.4883"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="588.5625" x2="588.5625" y1="67.4883" y2="443.2148"/></g><g><title>Database</title><rect fill="#000000" fill-opacity="0.00000" height="375.7266" width="8" x="702.437" y="67.4883"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="706.1045" x2="706.1045" y1="67.4883" y2="443.2148"/></g><g class="participant participant-head" data-participant="pipeline"><rect fill="#90EE90" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="182.6563" x="20" y="36"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="168.6563" x="27" y="56.5352">(Pre-)Processing Pipeline</text></g><g class="participant participant-tail" data-participant="pipeline"><rect fill="#90EE90" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="182.6563" x="20" y="442.2148"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="168.6563" x="27" y="462.75">(Pre-)Processing Pipeline</text></g><g class="participant participant-head" data-participant="backend"><rect fill="#FFA500" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="126.6631" x="378.8994" y="36"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="112.6631" x="385.8994" y="56.5352">Loculus Backend</text></g><g class="participant participant-tail" data-participant="backend"><rect fill="#FFA500" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="126.6631" x="378.8994" y="442.2148"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="112.6631" x="385.8994" y="462.75">Loculus Backend</text></g><g class="participant participant-head" data-participant="s3"><rect fill="#D3D3D3" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="146.542" x="515.5625" y="36"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="132.542" x="522.5625" y="56.5352">S3 / Object Storage</text></g><g class="participant participant-tail" data-participant="s3"><rect fill="#D3D3D3" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="146.542" x="515.5625" y="442.2148"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="132.542" x="522.5625" y="462.75">S3 / Object Storage</text></g><g class="participant participant-head" data-participant="DB"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="62.665" x="672.1045" y="64.5352">Database</text><path d="M688.437,15 C688.437,5 706.437,5 706.437,5 C706.437,5 724.437,5 724.437,15 L724.437,41 C724.437,51 706.437,51 706.437,51 C706.437,51 688.437,51 688.437,41 L688.437,15" fill="#E2E2F0" style="stroke:#181818;stroke-width:1.5;"/><path d="M688.437,15 C688.437,25 706.437,25 706.437,25 C706.437,25 724.437,25 724.437,15" fill="none" style="stroke:#181818;stroke-width:1.5;"/></g><g class="participant participant-tail" data-participant="DB"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="62.665" x="672.1045" y="455.75">Database</text><path d="M688.437,468.7031 C688.437,458.7031 706.437,458.7031 706.437,458.7031 C706.437,458.7031 724.437,458.7031 724.437,468.7031 L724.437,494.7031 C724.437,504.7031 706.437,504.7031 706.437,504.7031 C706.437,504.7031 688.437,504.7031 688.437,494.7031 L688.437,468.7031" fill="#E2E2F0" style="stroke:#181818;stroke-width:1.5;"/><path d="M688.437,468.7031 C688.437,478.7031 706.437,478.7031 706.437,478.7031 C706.437,478.7031 724.437,478.7031 724.437,468.7031" fill="none" style="stroke:#181818;stroke-width:1.5;"/></g><g class="message" data-participant-1="pipeline" data-participant-2="backend"><polygon fill="#181818" points="430.231,94.7988,440.231,98.7988,430.231,102.7988,434.231,98.7988" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="111.3281" x2="436.231" y1="98.7988" y2="98.7988"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="222.2441" x="118.3281" y="94.0566">request entries needing processing</text></g><g class="message" data-participant-1="backend" data-participant-2="DB"><polygon fill="#181818" points="694.437,124.1094,704.437,128.1094,694.437,132.1094,698.437,128.1094" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="442.231" x2="700.437" y1="128.1094" y2="128.1094"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="141.1655" x="449.231" y="123.3672">fetch entries + file IDs</text></g><g class="message" data-participant-1="backend" data-participant-2="pipeline"><polygon fill="#181818" points="122.3281,153.4199,112.3281,157.4199,122.3281,161.4199,118.3281,157.4199" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="116.3281" x2="441.231" y1="157.4199" y2="157.4199"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="230.5024" x="128.3281" y="152.6777">return entry data + pre-signed URLs</text></g><path d="M10,172.4199 L84.4468,172.4199 L84.4468,179.7305 L74.4468,189.7305 L10,189.7305 L10,172.4199" fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="46.6211" style="stroke:#000000;stroke-width:1.5;" width="662.1045" x="10" y="172.4199"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="29.4468" x="25" y="185.9883">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="76.1406" x="99.4468" y="185.0547">[for each file]</text><g class="message" data-participant-1="pipeline" data-participant-2="s3"><polygon fill="#181818" points="576.8335,207.041,586.8335,211.041,576.8335,215.041,580.8335,211.041" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="111.3281" x2="582.8335" y1="211.041" y2="211.041"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="226.3828" x="118.3281" y="206.2988">download file using pre-signed URL</text></g><g class="message" data-participant-1="pipeline" data-participant-2="backend"><polygon fill="#181818" points="430.231,243.3516,440.231,247.3516,430.231,251.3516,434.231,247.3516" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="111.3281" x2="436.231" y1="247.3516" y2="247.3516"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="306.9028" x="118.3281" y="242.6094">request new pre-signed URLs for processed files</text></g><g class="message" data-participant-1="backend" data-participant-2="DB"><polygon fill="#181818" points="694.437,272.6621,704.437,276.6621,694.437,280.6621,698.437,276.6621" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="442.231" x2="700.437" y1="276.6621" y2="276.6621"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="109.3511" x="449.231" y="271.9199">store new file IDs</text></g><g class="message" data-participant-1="backend" data-participant-2="pipeline"><polygon fill="#181818" points="122.3281,301.9727,112.3281,305.9727,122.3281,309.9727,118.3281,305.9727" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="116.3281" x2="441.231" y1="305.9727" y2="305.9727"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="239.9033" x="128.3281" y="301.2305">return new pre-signed URLs + file IDs</text></g><path d="M10,320.9727 L84.4468,320.9727 L84.4468,328.2832 L74.4468,338.2832 L10,338.2832 L10,320.9727" fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="46.6211" style="stroke:#000000;stroke-width:1.5;" width="662.1045" x="10" y="320.9727"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="29.4468" x="25" y="334.541">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="137.5537" x="99.4468" y="333.6074">[for each processed file]</text><g class="message" data-participant-1="pipeline" data-participant-2="s3"><polygon fill="#181818" points="576.8335,355.5938,586.8335,359.5938,576.8335,363.5938,580.8335,359.5938" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="111.3281" x2="582.8335" y1="359.5938" y2="359.5938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="208.3809" x="118.3281" y="354.8516">upload file using pre-signed URL</text></g><g class="message" data-participant-1="pipeline" data-participant-2="backend"><polygon fill="#181818" points="430.231,391.9043,440.231,395.9043,430.231,399.9043,434.231,395.9043" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="111.3281" x2="436.231" y1="395.9043" y2="395.9043"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="243.2422" x="118.3281" y="391.1621">submit processed file IDs + other data</text></g><g class="message" data-participant-1="backend" data-participant-2="DB"><polygon fill="#181818" points="694.437,421.2148,704.437,425.2148,694.437,429.2148,698.437,425.2148" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="442.231" x2="700.437" y1="425.2148" y2="425.2148"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="155.3843" x="449.231" y="420.4727">store processed file data</text></g><!--SRC=[hP71QiCm44Jl-Oh1kRIKq8DlFlGG3AKGI6Ze1yZssb7gIgfM8kJlQqjsI5q7SkXD4ZipRqS0O8HrifH6A8VaOMTfzRYpkYHcgHhifA5MAaeW66QuOBcHpS6zMYArmDHZeqlVUiPQb9-agg0iuXdBhHMgeR-YVOfdR8iZbGvxfwreOYIdbp1n3h9AE5489YJvS0g3-NeHNKV6rSkOci7IjoTs8EMi98OYglhjp6NHe1qfEsc-pb2JAmyNpHDgsHBUSfxEZf5zZlDM1SavW7OgqpNAib5KuUDzmv6orTgWrXOakeZUE3nF5-0qGwLFgjMYYl6U8_UrPv3sBBth7IqeEasf0ilG1iKedgk4kw-XO71t6NDfLrtErF6RusOntlnFBUoBB-acgJrRXwdTWMpuoTjjJ8HX-0S0]--></g></svg>
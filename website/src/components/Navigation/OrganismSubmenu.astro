---
import type { Organism } from '../../config';
import { getSequenceRelatedItems } from '../../routes/navigationItems';
import { extraSequenceRelatedTopNavigationItems } from '../../routes/extraTopNavigationItems';

interface Props {
    currentOrganism?: string;
    currentOrganismObject?: Organism;
    isBrowsePage: boolean;
    isSubmitPage: boolean;
}

const { currentOrganism, currentOrganismObject, isBrowsePage, isSubmitPage } = Astro.props;

// Get the navigation items for this organism
const sequenceRelatedItems = getSequenceRelatedItems(currentOrganism);
const extraItems = extraSequenceRelatedTopNavigationItems(currentOrganism);
---

{
    currentOrganism && (
        <nav class='bg-gray-50  border-gray-200 border-b-[1.5px]' aria-label='Organism navigation'>
            <div class='flex items-center gap-2 px-4 py-2 mx-4'>
                <span class='text-gray-700 font-medium mr-3'>
                    {currentOrganismObject?.displayName || currentOrganism}
                </span>
                <span class='text-gray-300 mr-2'>|</span>
                {sequenceRelatedItems.map(({ text, path }) => {
                    const isActive = 
                        (text === 'Browse' && isBrowsePage) || 
                        (text === 'Submit' && isSubmitPage);
                    return (
                        <a
                            href={path}
                            class={`px-2.5 py-0.5 rounded text-sm transition-colors ${
                                isActive ? 'bg-primary-100 text-gray-900' : 'text-gray-600 hover:bg-gray-100'
                            }`}
                        >
                            {text}
                        </a>
                    );
                })}
                {extraItems.map(({ text, path }) => (
                    <a
                        href={path}
                        class='px-2.5 py-0.5 rounded text-sm transition-colors text-gray-600 hover:bg-gray-100'
                    >
                        {text}
                    </a>
                ))}
            </div>
        </nav>
    )
}

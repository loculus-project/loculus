---
import BaseLayout from '../../layouts/BaseLayout.astro';
import { DatasetList } from '../../components/Datasets/DatasetList';
import { getRuntimeConfig } from '../../config';
import { getAccessToken } from '../../utils/getAccessToken';
import { mockDataset } from '../../components/Datasets/mockData';
import { BackendClient } from '../../services/backendClient';


const clientConfig = getRuntimeConfig().public;
const accessToken = getAccessToken(Astro.locals.session)!;
const username = Astro.locals.session?.user?.username;
const datasets = await BackendClient.create().astroFileTypeHelpers.getDatasetsofUser(
    accessToken,
    username,
);
---

<BaseLayout title='Datasets' data-testid='datasets-list-container'>
    <DatasetList
        datasets={[mockDataset]}
        clientConfig={clientConfig}
        accessToken={accessToken}
    />
</BaseLayout>
